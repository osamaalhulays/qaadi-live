# QN21 Evaluation

يقدّم معيار **QN21** واحدًا وعشرين معيارًا فيزيائيًا، لكلٍ منها رمز قصير
يُستخدم داخل النظام. يُصنَّف كل معيار كـ **داخلي** أو **خارجي** مع وزن محدد.
الجدول التالي يوضح الرموز، النوع، الوزن والوصف باللغتين العربية والإنجليزية.

| Code | Type | Weight | الوصف العربي | Description (EN) |
| ---- | ---- | ------ | ------------ | ---------------- |
| equations | internal | 5 | صرامة المعادلات | Equation accuracy |
| rigor | internal | 5 | الاشتقاقات والبراهين | Derivations and proofs |
| dimensional | internal | 5 | التحليل البعدي والوحدات | Dimensional analysis |
| symmetry | internal | 4 | التناظرات ومبادئ نوثر | Symmetry and Noether |
| conservation | internal | 4 | قوانين الحفظ | Conservation laws |
| boundary | internal | 4 | الشروط الحدية والابتدائية | Boundary conditions |
| consistency | internal | 5 | الاتساق الداخلي والخارجي | Internal and external consistency |
| scope | internal | 4 | نطاق وحدود التطبيق | Scope and limitations |
| novelty | internal | 4 | الجدة والإضافة | Novel contribution |
| predictions | internal | 6 | تنبؤات قابلة للاختبار | Testable predictions |
| falsifiability | internal | 6 | قابلية الدحض | Falsifiability |
| methodology | internal | 4 | منهجية العمل | Methodology |
| definitions | internal | 3 | تعريفات دقيقة | Precise definitions |
| terminology | internal | 3 | معجم مصطلحات متسق | Consistent terminology |
| clarity | internal | 3 | وضوح الصياغة والعرض | Clarity of presentation |
| diagrams | internal | 2 | رسوم وجداول توضيحية | Figures and tables |
| limitations | internal | 3 | القيود والمخاطر | Limitations and risks |
| expAlignment | external | 6 | اتساق مع البيانات | Experimental alignment |
| reproducibility | external | 5 | قابلية إعادة التجربة | Reproducibility |
| references | external | 3 | التوثيق والمراجع | References |
| ethics | external | 2 | السلامة والأخلاقيات | Ethics |

## Scoring

تعتمد الدالة `evaluateQN21(text)` على مطابقة عدة مؤشرات لكل معيار
(`patterns`). يمنح المعيار نقاطًا جزئية بنسبة عدد المؤشرات المطابقة إلى
إجمالي المؤشرات المعرفة له، ويُحسب الفرق عبر `gap = weight - score`.
بهذه الطريقة يمكن رصد التغطية الجزئية بدلًا من الاكتفاء بدرجتي الصفر أو
الوزن الكامل.

## Custom Criteria Integration

يمكن للمستخدم تعريف معايير إضافية خاصة به عبر واجهة البرمجة أو من خلال
محرر الواجهة. تُقيَّم هذه المعايير بواسطة الدالة `evaluateCriteria` ويتم
دمج نتائجها مع نتائج معايير QN21 عند استدعاء `runJudge`، مما يوفر تقريرًا
موحدًا يشمل المعايير القياسية والمخصصة.


## Debug Logs

لتفعيل السجلات التفصيلية أثناء تشغيل `runJudge`، يمكن تعيين المتغيّر البيئي `DEBUG_JUDGE` إلى القيمة `true` قبل التنفيذ. يؤدي ذلك إلى طباعة خطوات التقييم في الطرفية، مما يساعد في تتبع العمليات وتشخيص المشكلات.

مثال:

```bash
DEBUG_JUDGE=true node scripts/run-judge-example.js
```

مخرجات نموذجية:

```
runJudge: reading input
runJudge: evaluating criteria
runJudge: total score 42/100
runJudge: writing results to paper/judge.json
runJudge: done
```
